<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | Inbound AI Call System</title>
  <style>
    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --accent: #22c55e;
      --danger: #ef4444;
      --bg: #f3f4f6;
      --bg-card: #ffffff;
      --text-main: #111827;
      --text-sub: #6b7280;
      --border: #e5e7eb;
      --radius-lg: 16px;
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.12);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text-main);
      background: var(--bg);
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    button {
      font-family: inherit;
    }

    .page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Top header */
    .topbar {
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 16px;
      background: #ffffff;
      border-bottom: 1px solid var(--border);
      box-shadow: 0 4px 12px rgba(15, 23, 42, 0.03);
      position: sticky;
      top: 0;
      z-index: 20;
    }

    .topbar-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .topbar-right {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 12px;
      color: var(--text-sub);
    }

    .app-logo {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .app-logo-mark {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #ffffff 0, #bfdbfe 35%, #2563eb 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: #ffffff;
      font-size: 12px;
      box-shadow: 0 8px 20px rgba(37, 99, 235, 0.4);
    }

    .app-logo-text-main {
      font-weight: 700;
      font-size: 15px;
      letter-spacing: 0.04em;
    }

    .app-logo-text-sub {
      font-size: 11px;
      color: var(--text-sub);
    }

    .hamburger-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #ffffff;
      cursor: pointer;
      margin-right: 6px;
    }

    .hamburger-btn span {
      font-size: 18px;
    }

    .user-pill {
      padding: 4px 10px;
      border-radius: 999px;
      background: #f3f4ff;
      border: 1px solid #e5e7ff;
      font-size: 11px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .user-avatar {
      width: 20px;
      height: 20px;
      border-radius: 999px;
      background: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
    }

    .realtime-indicator {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 11px;
      color: var(--text-sub);
    }

    .realtime-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 0 6px rgba(34, 197, 94, 0.3);
    }

    .timestamp {
      font-size: 11px;
      color: var(--text-sub);
    }

    /* Layout */
    .layout {
      display: flex;
      flex: 1;
      min-height: 0;
    }

    /* Sidebar */
    .sidebar {
      width: 240px;
      background: #0f172a;
      color: #e5e7eb;
      display: flex;
      flex-direction: column;
      padding: 12px 10px;
      border-right: 1px solid rgba(15, 23, 42, 0.8);
      transition: transform 0.2s ease;
    }

    .sidebar-section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #6b7280;
      margin: 10px 6px 4px;
    }

    .nav-list {
      list-style: none;
      margin-bottom: 8px;
    }

    .nav-item {
      margin-bottom: 2px;
    }

    .nav-link {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 7px 8px;
      border-radius: 10px;
      font-size: 12px;
      color: #d1d5db;
      cursor: pointer;
    }

    .nav-link span.icon {
      width: 18px;
      text-align: center;
      font-size: 14px;
    }

    .nav-link.active {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      color: #ffffff;
    }

    .nav-link:hover:not(.active) {
      background: rgba(31, 41, 55, 0.9);
    }

    /* è¦ªãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‹ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”¨ */
.nav-has-children .nav-link-parent {
  align-items: center;
}

.nav-caret {
  margin-left: auto;
  font-size: 10px;
  opacity: 0.7;
  transition: transform 0.15s ease;
}

.nav-link-parent.is-open .nav-caret {
  transform: rotate(180deg);
}

.nav-sublist {
  list-style: none;
  margin: 4px 0 0 26px;
  padding: 0;
  display: none;
}

.nav-sublist.is-open {
  display: block;
}

.nav-sublink {
  padding: 5px 6px;
  border-radius: 8px;
  font-size: 11px;
  color: #9ca3af;
  cursor: pointer;
}

.nav-sublink:hover {
  background: rgba(31, 41, 55, 0.9);
  color: #e5e7eb;
}


    .sidebar-footer {
      margin-top: auto;
      padding-top: 8px;
      border-top: 1px solid rgba(55, 65, 81, 0.9);
      font-size: 10px;
      color: #6b7280;
    }

    .sidebar-footer a {
      color: #9ca3af;
    }

    /* Responsive sidebar (ãƒ¢ãƒã‚¤ãƒ«) */
    @media (max-width: 880px) {
      .sidebar {
        position: fixed;
        top: 56px;
        bottom: 0;
        left: 0;
        transform: translateX(-100%);
        z-index: 30;
      }

      .sidebar.is-open {
        transform: translateX(0);
      }

      .sidebar-backdrop {
        position: fixed;
        inset: 56px 0 0 0;
        background: rgba(15, 23, 42, 0.4);
        display: none;
        z-index: 25;
      }

      .sidebar-backdrop.is-open {
        display: block;
      }
    }

    @media (min-width: 881px) {
      .hamburger-btn {
        display: none;
      }
      .sidebar-backdrop {
        display: none;
      }
    }

    /* Main content */
    .main {
      flex: 1;
      padding: 16px 18px 20px;
      min-width: 0;
      overflow: auto;
    }

    .main-header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 10px;
      align-items: flex-end;
      margin-bottom: 14px;
    }

    .main-title {
      font-size: 18px;
      font-weight: 600;
    }

    .main-subtitle {
      font-size: 12px;
      color: var(--text-sub);
    }

    .main-tools {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      font-size: 12px;
    }

    .select {
      padding: 5px 8px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #ffffff;
      font-size: 12px;
    }

    .btn-outline {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #ffffff;
      font-size: 12px;
      cursor: pointer;
    }

    .btn-outline:hover {
      border-color: var(--primary);
    }

    /* Stats cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 10px;
      margin-bottom: 16px;
    }

    .stat-card {
      background: var(--bg-card);
      border-radius: 14px;
      padding: 10px 11px;
      border: 1px solid var(--border);
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.03);
      font-size: 11px;
    }

    .stat-label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
      color: var(--text-sub);
    }

    .stat-value {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 2px;
      display: flex;
      align-items: baseline;
      gap: 4px;
    }

    .stat-unit {
      font-size: 11px;
      color: var(--text-sub);
    }

    .stat-trend {
      font-size: 10px;
      color: var(--accent);
    }

    .stat-trend.down {
      color: var(--danger);
    }

    .stat-bar {
      position: relative;
      height: 4px;
      border-radius: 999px;
      background: #e5e7eb;
      overflow: hidden;
      margin-top: 4px;
    }

    .stat-bar-fill {
      position: absolute;
      inset: 0;
      width: 40%;
      background: linear-gradient(90deg, #2563eb, #22c55e);
    }

    /* Lower layout: left (calls), right (summary) */
    .lower-grid {
      display: grid;
      grid-template-columns: 2.2fr 1.3fr;
      gap: 12px;
      min-height: 0;
    }

    .card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 12px 12px 10px;
      border: 1px solid var(--border);
      box-shadow: 0 10px 22px rgba(15, 23, 42, 0.03);
      font-size: 11px;
      min-height: 0;
      display: flex;
      flex-direction: column;
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    .card-title {
      font-size: 13px;
      font-weight: 600;
    }

    .card-subtitle {
      font-size: 11px;
      color: var(--text-sub);
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 7px;
      border-radius: 999px;
      background: #eff6ff;
      color: #1d4ed8;
      font-size: 10px;
    }

    .badge-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--accent);
    }

    .calls-table-wrapper {
      flex: 1;
      overflow: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 11px;
    }

    th, td {
      padding: 5px 4px;
      text-align: left;
      white-space: nowrap;
    }

    th {
      position: sticky;
      top: 0;
      background: #f9fafb;
      border-bottom: 1px solid var(--border);
      font-weight: 600;
      color: var(--text-sub);
    }

    tr:not(:last-child) td {
      border-bottom: 1px solid #f3f4f6;
    }

    tr:hover td {
      background: #f9fafb;
    }

    /* è¡Œã‚¯ãƒªãƒƒã‚¯ç”¨ */
    .call-row {
      cursor: pointer;
    }

    /* è»¢é€å¾…ã¡ã‚¢ãƒ©ãƒ¼ãƒˆè¡Œ */
    .call-row-escalation td {
      background: #fef2f2;
      border-left: 3px solid var(--danger);
    }

    .call-row-escalation:hover td {
      background: #fee2e2;
    }

    .status-pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 2px 6px;
      border-radius: 999px;
      font-size: 10px;
    }

    .status-waiting {
      background: #fef3c7;
      color: #92400e;
    }

    .status-talking {
      background: #dbeafe;
      color: #1d4ed8;
    }

    .status-ended {
      background: #e5e7eb;
      color: #374151;
    }

    .status-ai {
      background: #dcfce7;
      color: #166534;
    }

    .status-human {
      background: #e0e7ff;
      color: #3730a3;
    }

    .status-escalation {
      background: #fee2e2;
      color: #b91c1c;
    }

    .summary-section {
      margin-bottom: 10px;
    }

    .summary-label {
      font-size: 11px;
      color: var(--text-sub);
      margin-bottom: 4px;
    }

    .summary-value {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .summary-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      margin-top: 6px;
    }

    .mini-card {
      background: #f9fafb;
      border-radius: 10px;
      padding: 8px;
      border: 1px solid #e5e7eb;
    }

    .mini-label {
      font-size: 10px;
      color: var(--text-sub);
      margin-bottom: 2px;
    }

    .mini-value {
      font-size: 13px;
      font-weight: 600;
    }

    .mini-trend {
      font-size: 10px;
      color: var(--accent);
    }

    .mini-trend.down {
      color: var(--danger);
    }

    .note {
      font-size: 10px;
      color: var(--text-sub);
      margin-top: 4px;
    }

    @media (max-width: 980px) {
      .stats-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
      .lower-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 640px) {
      .main {
        padding-inline: 12px;
      }
      .stats-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    /* === ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ç”¨ãƒ¢ãƒ¼ãƒ€ãƒ« === */

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.45);
      display: none;
      z-index: 40;
    }

    .modal-backdrop.is-open {
      display: block;
    }

    .modal {
      position: fixed;
      top: 8%;
      left: 50%;
      transform: translateX(-50%);
      width: min(720px, 100% - 32px);
      max-height: 84vh;
      background: #ffffff;
      border-radius: 18px;
      padding: 16px 18px 12px;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border);
      display: none;
      z-index: 50;
      display: none;
    }

    .modal.is-open {
      display: flex;
      flex-direction: column;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .modal-title {
      font-size: 14px;
      font-weight: 600;
    }

    .modal-meta {
      font-size: 11px;
      color: var(--text-sub);
    }

    .modal-close-btn {
      border: none;
      background: #f3f4f6;
      width: 26px;
      height: 26px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-body {
      flex: 1;
      overflow: auto;
      padding-top: 4px;
    }

    .monitor-summary {
      background: #f9fafb;
      border-radius: 10px;
      padding: 8px 9px;
      border: 1px solid #e5e7eb;
      font-size: 11px;
      margin-bottom: 8px;
    }

    .monitor-summary-label {
      font-size: 10px;
      font-weight: 600;
      color: var(--text-sub);
      margin-bottom: 3px;
    }

    .monitor-status {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
      font-size: 11px;
      margin-bottom: 8px;
    }

    .monitor-status-label {
      font-size: 10px;
      color: var(--text-sub);
    }

    .monitor-status-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 8px;
      border-radius: 999px;
      background: #fee2e2;
      color: #b91c1c;
      font-size: 10px;
    }

    .monitor-status-note {
      font-size: 10px;
      color: var(--text-sub);
    }

    .monitor-stream {
      margin-top: 4px;
    }

    .monitor-stream-label {
      font-size: 10px;
      color: var(--text-sub);
      margin-bottom: 4px;
    }

    .monitor-stream-log {
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      background: #ffffff;
      padding: 8px;
      max-height: 260px;
      overflow: auto;
      font-size: 11px;
    }

    .turn {
      margin-bottom: 6px;
    }

    .turn-label {
      font-size: 10px;
      color: var(--text-sub);
      margin-bottom: 1px;
    }

    .turn-content {
      background: #f9fafb;
      border-radius: 7px;
      padding: 4px 6px;
    }

    .turn-content-ai {
      background: #eff6ff;
    }

    .modal-footer {
      padding-top: 6px;
      border-top: 1px solid #e5e7eb;
      margin-top: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 10px;
      color: var(--text-sub);
      gap: 8px;
    }

    .modal-footer-actions {
      display: flex;
      gap: 6px;
    }

    .btn-sm {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #ffffff;
      cursor: pointer;
    }

    .btn-sm-primary {
      border-color: var(--primary);
      background: #eff6ff;
      color: #1d4ed8;
    }

    @media (max-width: 640px) {
      .modal {
        top: 4%;
        padding-inline: 14px;
      }
    }
    /* ã‚°ãƒ­ãƒ¼ãƒãƒ«æ¤œç´¢ãƒãƒ¼ */
.global-search {
  display: flex;
  align-items: center;
  gap: 4px;
}

.global-search-input {
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  font-size: 11px;
  min-width: 190px;
  background: #ffffff;
}

.global-search-btn {
  border: none;
  background: transparent;
  font-size: 11px;
  color: var(--primary-dark);
  cursor: pointer;
  padding: 4px 6px;
  border-radius: 999px;
}

.global-search-btn:hover {
  background: #e5e7eb;
}

  </style>
</head>
<body>
  <div class="page">
    <!-- Top Bar -->
    <header class="topbar">
      <div class="topbar-left">
        <button class="hamburger-btn" id="sidebar-toggle" type="button">
          <span>â˜°</span>
        </button>
        <div class="app-logo">
          <div class="app-logo-mark">AI</div>
          <div>
            <div class="app-logo-text-main">Inbound Call System</div>
            <div class="app-logo-text-sub">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</div>
          </div>
        </div>
      </div>
    
      <div class="topbar-right">
        <!-- ğŸŒ ã“ã“ãŒè¿½åŠ éƒ¨åˆ†ï¼šã‚°ãƒ­ãƒ¼ãƒãƒ«æ¤œç´¢ -->
        <form class="global-search" id="global-search-form">
          <input
            id="global-search-input"
            class="global-search-input"
            type="search"
            placeholder="ä¾‹: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ / ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ / ãƒ­ã‚° / CRM..."
          />
          <button class="global-search-btn" type="submit">æ¤œç´¢</button>
        </form>
    
        <!-- æ—¢å­˜ï¼šæ™‚åˆ» & ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ± -->
        <span class="timestamp" id="timestamp"></span>
        <div class="user-pill">
          <div class="user-avatar">ğŸ‘¤</div>
          <span>Admin User</span>
        </div>
      </div>
    </header>
    

    <!-- Sidebar backdrop (for mobile) -->
    <div class="sidebar-backdrop" id="sidebar-backdrop"></div>

    <!-- Layout -->
    <div class="layout">
      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-section-title">Main</div>
        <ul class="nav-list">
          <li class="nav-item">
            <div class="nav-link active">
              <span class="icon">ğŸ“Š</span>
              <span>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span>
            </div>
          </li>
          <li class="nav-item">
            <div class="nav-link">
              <span class="icon">ğŸ“</span>
              <span>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç€ä¿¡ãƒ¢ãƒ‹ã‚¿</span>
            </div>
          </li>
        </ul>

        <div class="sidebar-section-title">Management</div>
        <ul class="nav-list">
          <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç† -->
          <li class="nav-item nav-has-children">
            <div class="nav-link nav-link-parent is-open" id="nav-user-toggle">
              <span class="icon">ğŸ‘¥</span>
              <span>ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</span>
              <span class="nav-caret">â–¾</span>
            </div>
            <ul class="nav-sublist is-open" id="nav-user-sub">
              <li><a href="users.html"      class="nav-sublink">ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§</a></li>
              <li><a href="groups.html"     class="nav-sublink">ã‚°ãƒ«ãƒ¼ãƒ—ç®¡ç†</a></li>
              <li><a href="roles.html"      class="nav-sublink">æ¨©é™ç®¡ç†</a></li>
            </ul>
          </li>
        
          <!-- é›»è©±ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ï¼ˆæ—¢å­˜ï¼‰ -->
          <li class="nav-item nav-has-children">
            <div class="nav-link nav-link-parent is-open" id="nav-telephony-toggle">
              <span class="icon">ğŸ”¢</span>
              <span>é›»è©±ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†</span>
              <span class="nav-caret">â–¾</span>
            </div>
            <ul class="nav-sublist is-open" id="nav-telephony-sub">
              <li><a href="operators.html"    class="nav-sublink">ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ä¸€è¦§</a></li>
              <li><a href="ai-operators.html" class="nav-sublink">AIã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ä¸€è¦§</a></li>
              <li><a href="numbers.html"      class="nav-sublink">ç•ªå·ç®¡ç†</a></li>
              <li><a href="queues.html"       class="nav-sublink">ã‚³ãƒ¼ãƒ«ã‚­ãƒ¥ãƒ¼</a></li>
              <li><a href="monitoring.html"   class="nav-sublink">ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°</a></li>
              <li><a href="logs.html"         class="nav-sublink">ãƒ­ã‚°</a></li>
            </ul>
          </li>
        
          <!-- AIã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ï¼ˆæ—¢å­˜ï¼‰ -->
          <li class="nav-item nav-has-children">
            <div class="nav-link nav-link-parent is-open" id="nav-ai-toggle">
              <span class="icon">ğŸ¤–</span>
              <span>AIã‚·ã‚¹ãƒ†ãƒ ç®¡ç†</span>
              <span class="nav-caret">â–¾</span>
            </div>
            <ul class="nav-sublist is-open" id="nav-ai-sub">
              <li><a href="scenarios.html"    class="nav-sublink">ã‚·ãƒŠãƒªã‚ªç®¡ç†</a></li>
              <li><a href="ai-voices.html"    class="nav-sublink">AIéŸ³å£°ç®¡ç†</a></li>
              <li><a href="knowledge.html"    class="nav-sublink">ãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†</a></li>
            </ul>
          </li>
        
          <!-- é¡§å®¢æƒ…å ±ç®¡ç†ï¼ˆå…ƒï¼šã‚·ã‚¹ãƒ†ãƒ è¨­å®šï¼‰ -->
          <li class="nav-item nav-has-children">
            <div class="nav-link nav-link-parent is-open" id="nav-crm-toggle">
              <span class="icon">ğŸ“‡</span>
              <span>é¡§å®¢æƒ…å ±ç®¡ç†</span>
              <span class="nav-caret">â–¾</span>
            </div>
            <ul class="nav-sublist is-open" id="nav-crm-sub">
              <li><a href="crm-integrations.html" class="nav-sublink">å¤–éƒ¨CRMé€£æº</a></li>
              <li><a href="crm.html"             class="nav-sublink">CRM</a></li>
            </ul>
          </li>
        </ul>
        


        <div class="sidebar-section-title">Other</div>
        <ul class="nav-list">
          <li class="nav-item">
            <a href="index.html" class="nav-link">
              <span class="icon">ğŸ </span>
              <span>LPãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</span>
            </a>
          </li>
        </ul>

        <div class="sidebar-footer">
          <div>Â© 2025 Inbound AI Call System</div>
          <div><a href="#">åˆ©ç”¨çŠ¶æ³ãƒ¬ãƒãƒ¼ãƒˆï¼ˆå¾Œæ—¥å®Ÿè£…ï¼‰</a></div>
        </div>
      </aside>

      <!-- Main content -->
      <main class="main">
        <div class="main-header">
          <div>
            <h1 class="main-title">ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
            <p class="main-subtitle">
              æŒ‡æ¨™ã¯ã‚ãã¾ã§ã‚µãƒ³ãƒ—ãƒ«å€¤ã§ã™ã€‚å¾Œã§APIã‹ã‚‰å®Ÿãƒ‡ãƒ¼ã‚¿ã‚’é€£æºã™ã‚‹æƒ³å®šã§è¨­è¨ˆã—ã¾ã™ã€‚
            </p>
          </div>
          <div class="main-tools">
            <select class="select" id="queue-select">
              <option value="all">å…¨ã¦ã®ã‚­ãƒ¥ãƒ¼</option>
              <option value="main">ãƒ¡ã‚¤ãƒ³çª“å£</option>
              <option value="support">ã‚µãƒãƒ¼ãƒˆçª“å£</option>
            </select>
            <button class="btn-outline" type="button" id="refresh-btn">ä»Šã™ãæ›´æ–°</button>
          </div>
        </div>

        <!-- Stats cards -->
        <section class="stats-grid">
          <article class="stat-card">
            <div class="stat-label">
              <span>ç¾åœ¨ã®ç€ä¿¡ä»¶æ•°</span>
              <span class="stat-trend" id="trend-incoming">+12% vs å‰æ—¥</span>
            </div>
            <div class="stat-value">
              <span id="stat-incoming">12</span>
              <span class="stat-unit">ä»¶ / ç¾åœ¨</span>
            </div>
            <div class="stat-bar">
              <div class="stat-bar-fill" id="bar-incoming"></div>
            </div>
          </article>

          <article class="stat-card">
            <div class="stat-label">
              <span>åŒæ™‚é€šè©±æ•°</span>
              <span class="stat-trend" id="trend-concurrent">+3ã‚»ãƒƒã‚·ãƒ§ãƒ³</span>
            </div>
            <div class="stat-value">
              <span id="stat-concurrent">5</span>
              <span class="stat-unit">é€šè©±</span>
            </div>
            <div class="stat-bar">
              <div class="stat-bar-fill" id="bar-concurrent"></div>
            </div>
          </article>

          <article class="stat-card">
            <div class="stat-label">
              <span>å¿œç­”ç‡ï¼ˆæœ¬æ—¥ï¼‰</span>
              <span class="stat-trend" id="trend-answer">+4.2pt</span>
            </div>
            <div class="stat-value">
              <span id="stat-answer">92.3</span>
              <span class="stat-unit">%</span>
            </div>
            <div class="stat-bar">
              <div class="stat-bar-fill" id="bar-answer"></div>
            </div>
          </article>

          <article class="stat-card">
            <div class="stat-label">
              <span>æ”¾æ£„å‘¼ç‡ï¼ˆæœ¬æ—¥ï¼‰</span>
              <span class="stat-trend down" id="trend-abandon">-1.8pt</span>
            </div>
            <div class="stat-value">
              <span id="stat-abandon">3.4</span>
              <span class="stat-unit">%</span>
            </div>
            <div class="stat-bar">
              <div class="stat-bar-fill" id="bar-abandon"></div>
            </div>
          </article>
        </section>

        <!-- Lower: calls + summary -->
        <section class="lower-grid">
          <!-- Real-time calls -->
          <article class="card">
            <div class="card-header">
              <div>
                <h2 class="card-title">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç€ä¿¡çŠ¶æ³</h2>
                <p class="card-subtitle">
                  è¡Œã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€é€šè©±å†…å®¹ã‚’æ–‡å­—èµ·ã“ã—ã§ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã§ãã¾ã™ï¼ˆã‚µãƒ³ãƒ—ãƒ«ï¼‰ã€‚
                  èµ¤ã„è¡Œã¯ã€ŒAIã§å¯¾å¿œã—ãã‚Œãšã€æœ‰äººã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã¸ã®è»¢é€å¾…ã¡ã€ã§ã™ã€‚
                </p>
              </div>
              <div class="badge">
                <span class="badge-dot"></span>
                <span>ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ä¸­</span>
              </div>
            </div>
            <div class="calls-table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>ç€ä¿¡æ™‚åˆ»</th>
                    <th>ç™ºä¿¡è€…ç•ªå·</th>
                    <th>ã‚­ãƒ¥ãƒ¼</th>
                    <th>çŠ¶æ…‹</th>
                    <th>çµŒéæ™‚é–“</th>
                    <th>æ‹…å½“</th>
                  </tr>
                </thead>
                <tbody id="calls-tbody">
                  <!-- è»¢é€å¾…ã¡ï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆå¯¾è±¡ï¼‰ -->
                  <tr
                    class="call-row call-row-escalation"
                    data-call-id="call-escalation-1"
                    data-caller="090-1234-5678"
                    data-queue="ãƒ¡ã‚¤ãƒ³çª“å£"
                    data-status="è»¢é€å¾…ã¡"
                  >
                    <td>10:15:32</td>
                    <td>090-1234-5678</td>
                    <td>ãƒ¡ã‚¤ãƒ³çª“å£</td>
                    <td><span class="status-pill status-escalation">è»¢é€å¾…ã¡</span></td>
                    <td>00:48</td>
                    <td><span class="status-pill status-ai">AIã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼</span></td>
                  </tr>

                  <!-- é€šè©±ä¸­ï¼ˆæœ‰äººï¼‰ -->
                  <tr
                    class="call-row"
                    data-call-id="call-human-1"
                    data-caller="080-9876-5432"
                    data-queue="ã‚µãƒãƒ¼ãƒˆ"
                    data-status="é€šè©±ä¸­"
                  >
                    <td>10:14:05</td>
                    <td>080-9876-5432</td>
                    <td>ã‚µãƒãƒ¼ãƒˆ</td>
                    <td><span class="status-pill status-talking">é€šè©±ä¸­</span></td>
                    <td>02:12</td>
                    <td><span class="status-pill status-human">éˆ´æœ¨</span></td>
                  </tr>

                  <!-- çµ‚äº†æ¸ˆã¿ï¼ˆAIå®Œçµï¼‰ -->
                  <tr
                    class="call-row"
                    data-call-id="call-ai-end-1"
                    data-caller="050-5555-1111"
                    data-queue="ãƒ¡ã‚¤ãƒ³çª“å£"
                    data-status="çµ‚äº†"
                  >
                    <td>10:13:48</td>
                    <td>050-5555-1111</td>
                    <td>ãƒ¡ã‚¤ãƒ³çª“å£</td>
                    <td><span class="status-pill status-ended">çµ‚äº†</span></td>
                    <td>03:08</td>
                    <td><span class="status-pill status-ai">AIã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼</span></td>
                  </tr>

                  <!-- é€šè©±ä¸­ï¼ˆæœ‰äººï¼‰ -->
                  <tr
                    class="call-row"
                    data-call-id="call-human-2"
                    data-caller="03-1234-0000"
                    data-queue="è«‹æ±‚çª“å£"
                    data-status="é€šè©±ä¸­"
                  >
                    <td>10:12:21</td>
                    <td>03-1234-0000</td>
                    <td>è«‹æ±‚çª“å£</td>
                    <td><span class="status-pill status-talking">é€šè©±ä¸­</span></td>
                    <td>04:55</td>
                    <td><span class="status-pill status-human">ç”°ä¸­</span></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </article>

          <!-- Summary -->
          <article class="card">
            <div class="card-header">
              <div>
                <h2 class="card-title">æœ¬æ—¥ã®ã‚µãƒãƒªãƒ¼</h2>
                <p class="card-subtitle">
                  æ—¥å˜ä½ã®é›†è¨ˆå€¤ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚ã“ã“ã‹ã‚‰æ—¥/é€±/æœˆåˆ¥ã®ãƒ¬ãƒãƒ¼ãƒˆç”»é¢ã¸é·ç§»ã§ãã¾ã™ã€‚
                </p>
              </div>
            </div>

            <div class="summary-section">
              <div class="summary-label">æœ¬æ—¥ã®ç·ç€ä¿¡ä»¶æ•°</div>
              <div class="summary-value" id="summary-total">324 ä»¶</div>
              <div class="summary-grid">
                <div class="mini-card">
                  <div class="mini-label">AIã§å®Œçµ</div>
                  <div class="mini-value" id="summary-ai-complete">218 ä»¶</div>
                  <div class="mini-trend">+15% vs å‰æ—¥</div>
                </div>
                <div class="mini-card">
                  <div class="mini-label">æœ‰äººè»¢é€ã•ã‚ŒãŸä»¶æ•°</div>
                  <div class="mini-value" id="summary-human-transfer">72 ä»¶</div>
                  <div class="mini-trend down">-5% vs å‰æ—¥</div>
                </div>
              </div>
            </div>

            <div class="summary-section">
              <div class="summary-label">å¹³å‡æŒ‡æ¨™ï¼ˆæœ¬æ—¥ï¼‰</div>
              <div class="summary-grid">
                <div class="mini-card">
                  <div class="mini-label">å¹³å‡å¿œç­”æ™‚é–“</div>
                  <div class="mini-value" id="summary-asa">09.4 ç§’</div>
                  <div class="mini-trend">SLA ç›®æ¨™: 10 ç§’</div>
                </div>
                <div class="mini-card">
                  <div class="mini-label">å¹³å‡é€šè©±æ™‚é–“</div>
                  <div class="mini-value" id="summary-aht">03:21</div>
                  <div class="mini-trend">å‰æ—¥æ¯” +8 ç§’</div>
                </div>
              </div>
            </div>

            <div class="summary-section">
              <div class="summary-label">AI / æœ‰äººæ¯”ç‡</div>
              <div class="summary-grid">
                <div class="mini-card">
                  <div class="mini-label">AIå®Œçµç‡</div>
                  <div class="mini-value" id="summary-ai-rate">67.3%</div>
                </div>
                <div class="mini-card">
                  <div class="mini-label">æœ‰äººå¯¾å¿œç‡</div>
                  <div class="mini-value" id="summary-human-rate">32.7%</div>
                </div>
              </div>
              <p class="note">
                â€» ã™ã¹ã¦ã‚µãƒ³ãƒ—ãƒ«å€¤ã§ã™ã€‚å®Ÿéš›ã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®é›†è¨ˆAPIã¨é€£æºã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚
              </p>
            </div>
          </article>
        </section>
      </main>
    </div>
  </div>

  <!-- === é€šè©±ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ç”¨ãƒ¢ãƒ¼ãƒ€ãƒ« === -->
  <div class="modal-backdrop" id="monitor-backdrop"></div>
  <div class="modal" id="monitor-modal">
    <div class="modal-header">
      <div>
        <div class="modal-title" id="monitor-title">é€šè©±ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°</div>
        <div class="modal-meta" id="monitor-meta">ç™ºä¿¡è€…: - / ã‚­ãƒ¥ãƒ¼: - / çŠ¶æ…‹: -</div>
      </div>
      <button class="modal-close-btn" id="monitor-close" type="button">Ã—</button>
    </div>

    <div class="modal-body">
      <section class="monitor-summary">
        <div class="monitor-summary-label">ã“ã“ã¾ã§ã®å†…å®¹ã®è¦ç´„ï¼ˆã‚µãƒ³ãƒ—ãƒ«ï¼‰</div>
        <div id="monitor-summary-text">
          ã¾ã è¦ç´„ãŒã‚ã‚Šã¾ã›ã‚“ã€‚
        </div>
      </section>

      <section class="monitor-status">
        <span class="monitor-status-label">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ / ãƒ¡ãƒ¢:</span>
        <span class="monitor-status-pill" id="monitor-status-pill">
          -
        </span>
        <span class="monitor-status-note" id="monitor-status-note">
          -
        </span>
      </section>

      <section class="monitor-stream">
        <div class="monitor-stream-label">
          ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ›´æ–°ã•ã‚Œã‚‹æ–‡å­—èµ·ã“ã—ï¼ˆãŠå®¢æ§˜ç™ºè©± / AIå¿œç­”ï¼‰â€» ç¾åœ¨ã¯ãƒ‡ãƒ¢ã§æ•°ç§’ã”ã¨ã«æ›´æ–°
        </div>
        <div class="monitor-stream-log" id="monitor-stream-log">
          <!-- ã“ã“ã«JSã§ã‚¿ãƒ¼ãƒ³ã‚’è¿½åŠ  -->
        </div>
      </section>
    </div>

    <div class="modal-footer">
      <div>â€» å®Ÿè£…æ™‚ã¯STT/LLM/TTSãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã“ã“ã«ãƒ­ã‚°ã‚’æµã—è¾¼ã‚€æƒ³å®šã§ã™ã€‚</div>
      <div class="modal-footer-actions">
        <button class="btn-sm" type="button" id="monitor-stop-stream">ã•ã•ã‚„ã</button>
        <button class="btn-sm btn-sm-primary" type="button" id="monitor-resume-stream">å‰²ã‚Šè¾¼ã¿</button>
      </div>
    </div>
  </div>

  <script>
    // ===== ã‚µã‚¤ãƒ‰ãƒãƒ¼é–‹é–‰ï¼ˆãƒ¢ãƒã‚¤ãƒ«ç”¨ï¼‰ =====
    const sidebar = document.getElementById("sidebar");
    const sidebarToggle = document.getElementById("sidebar-toggle");
    const sidebarBackdrop = document.getElementById("sidebar-backdrop");

    function toggleSidebar() {
      sidebar.classList.toggle("is-open");
      sidebarBackdrop.classList.toggle("is-open");
    }

    sidebarToggle.addEventListener("click", toggleSidebar);
    sidebarBackdrop.addEventListener("click", toggleSidebar);

  // Management ãƒ¡ãƒ‹ãƒ¥ãƒ¼é–‹é–‰
const telephonyToggle = document.getElementById("nav-telephony-toggle");
const telephonySub    = document.getElementById("nav-telephony-sub");
if (telephonyToggle && telephonySub) {
  telephonyToggle.addEventListener("click", () => {
    telephonySub.classList.toggle("is-open");
    telephonyToggle.classList.toggle("is-open");
  });
}

const aiToggle = document.getElementById("nav-ai-toggle");
const aiSub    = document.getElementById("nav-ai-sub");
if (aiToggle && aiSub) {
  aiToggle.addEventListener("click", () => {
    aiSub.classList.toggle("is-open");
    aiToggle.classList.toggle("is-open");
  });
}

// â˜… è¿½åŠ ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
const userToggle = document.getElementById("nav-user-toggle");
const userSub    = document.getElementById("nav-user-sub");
if (userToggle && userSub) {
  userToggle.addEventListener("click", () => {
    userSub.classList.toggle("is-open");
    userToggle.classList.toggle("is-open");
  });
}

// â˜… è¿½åŠ ï¼šé¡§å®¢æƒ…å ±ç®¡ç†ï¼ˆCRMï¼‰
const crmToggle = document.getElementById("nav-crm-toggle");
const crmSub    = document.getElementById("nav-crm-sub");
if (crmToggle && crmSub) {
  crmToggle.addEventListener("click", () => {
    crmSub.classList.toggle("is-open");
    crmToggle.classList.toggle("is-open");
  });
}

    // ===== ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—è¡¨ç¤º =====
    function updateTimestamp() {
      const el = document.getElementById("timestamp");
      const now = new Date();
      const pad = (n) => String(n).padStart(2, "0");
      const text =
        now.getFullYear() +
        "/" +
        pad(now.getMonth() + 1) +
        "/" +
        pad(now.getDate()) +
        " " +
        pad(now.getHours()) +
        ":" +
        pad(now.getMinutes()) +
        ":" +
        pad(now.getSeconds());
      el.textContent = text;
    }
    updateTimestamp();
    setInterval(updateTimestamp, 1000);

    // ===== ç°¡æ˜“ãªã‚µãƒ³ãƒ—ãƒ«å€¤ã®æ›´æ–° =====
    const statIncoming = document.getElementById("stat-incoming");
    const statConcurrent = document.getElementById("stat-concurrent");
    const statAnswer = document.getElementById("stat-answer");
    const statAbandon = document.getElementById("stat-abandon");

    const barIncoming = document.getElementById("bar-incoming");
    const barConcurrent = document.getElementById("bar-concurrent");
    const barAnswer = document.getElementById("bar-answer");
    const barAbandon = document.getElementById("bar-abandon");

    function randomInRange(min, max) {
      return Math.random() * (max - min) + min;
    }

    function refreshStats() {
      const incoming = Math.round(randomInRange(5, 18));
      const concurrent = Math.round(randomInRange(2, 10));
      const answer = randomInRange(85, 97).toFixed(1);
      const abandon = randomInRange(2, 8).toFixed(1);

      statIncoming.textContent = incoming;
      statConcurrent.textContent = concurrent;
      statAnswer.textContent = answer;
      statAbandon.textContent = abandon;

      barIncoming.style.width = Math.min((incoming / 20) * 100, 100) + "%";
      barConcurrent.style.width = Math.min((concurrent / 12) * 100, 100) + "%";
      barAnswer.style.width = Math.min((answer / 100) * 100, 100) + "%";
      barAbandon.style.width = Math.min((abandon / 20) * 100, 100) + "%";
    }

    document.getElementById("refresh-btn").addEventListener("click", refreshStats);
    setInterval(refreshStats, 15000);

    // ===== é€šè©±ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ç”¨ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚µãƒ³ãƒ—ãƒ«ï¼‰ =====
    const callDetails = {
      "call-escalation-1": {
        summary:
          "æ–™é‡‘æ”¹å®šã«é–¢ã™ã‚‹å•ã„åˆã‚ã›ã€‚AIã§åŸºæœ¬èª¬æ˜ã¯è¡Œã£ãŸãŒã€ã€ãªãœè‡ªåˆ†ã ã‘è«‹æ±‚ãŒé«˜ã„ã®ã‹ã€ã¨ã„ã†ç‚¹ã«ã¤ã„ã¦èª¬æ˜ã¸ã®ç´å¾—ãŒå¾—ã‚‰ã‚Œãšã€æ„Ÿæƒ…çš„ã«ãªã‚Šã¤ã¤ã‚ã‚‹ãŸã‚æœ‰äººã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã¸è»¢é€å¾…ã¡ã€‚",
        statusLabel: "è»¢é€å¾…ã¡ï¼ˆã‚¯ãƒ¬ãƒ¼ãƒ å¯¾å¿œï¼‰",
        statusNote: "AIã§ã¯èª¬æ˜ã®èª¬å¾—åŠ›ãŒä¸è¶³ã—ã¦ã„ã‚‹ã¨åˆ¤æ–­ã—ã€æ„Ÿæƒ…é¢ã®ã‚±ã‚¢ã‚‚å¿…è¦ãªãŸã‚æœ‰äººå¯¾å¿œã‚’æ¨å¥¨ã€‚",
        streamTemplate: [
          { speaker: "customer", text: "ã‚ã®ã€ä»Šæœˆã®è«‹æ±‚ãŒã„ã¤ã‚‚ã‚ˆã‚Šé«˜ã„æ°—ãŒã™ã‚‹ã‚“ã§ã™ãŒã€ã©ã†ã„ã†ã“ã¨ã§ã™ã‹ï¼Ÿ" },
          { speaker: "ai", text: "ãŠå•ã„åˆã‚ã›ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ä»Šæœˆã®ã”è«‹æ±‚ãŒé«˜ããªã£ã¦ã„ã‚‹ç†ç”±ã‚’ãŠèª¿ã¹ã—ã¾ã™ã®ã§ã€ã”å¥‘ç´„ä¸­ã®ãƒ—ãƒ©ãƒ³åã‚’æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿ" },
          { speaker: "customer", text: "å¤šåˆ†ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ©ãƒ³â€¦ã ã£ãŸã¨æ€ã„ã¾ã™ã€‚ã¨ã«ã‹ãå…ˆæœˆã‚ˆã‚Š5åƒå††ãã‚‰ã„é«˜ã„ã‚“ã§ã™ã‚ˆã­ã€‚" },
          { speaker: "ai", text: "ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ãŠèª¿ã¹ã—ãŸã¨ã“ã‚ã€ä»Šæœˆã‹ã‚‰éŸ³å£°é€šè©±ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã”è¿½åŠ ã„ãŸã ã„ã¦ãŠã‚Šã€ãã®ã”åˆ©ç”¨åˆ†ãŒåŠ ç®—ã•ã‚Œã¦ã„ã¾ã™ã€‚" },
          { speaker: "customer", text: "ã„ã‚„ã€ãã‚Œã¯åˆ†ã‹ã£ãŸã‚“ã§ã™ã‘ã©ã€ãã‚“ãªã«ä½¿ã£ã¦ãªã„ã¯ãšãªã‚“ã§ã™ã‚ˆã€‚æœ¬å½“ã«ãã®æ–™é‡‘ã«ãªã‚‹ã®ã‹ã€äººã¨è©±ã—ã¦ç¢ºèªã—ãŸã„ã§ã™ã€‚" }
        ]
      },
      "call-human-1": {
        summary:
          "æ©Ÿèƒ½ã®æ“ä½œæ–¹æ³•ã«é–¢ã™ã‚‹å•ã„åˆã‚ã›ã€‚ã™ã§ã«æœ‰äººã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã«è»¢é€æ¸ˆã¿ã§ã€æ“ä½œæ¡ˆå†…ã‚’ã—ãªãŒã‚‰ç”»é¢å…±æœ‰ã‚‚æ¤œè¨ã—ã¦ã„ã‚‹çŠ¶æ³ã€‚",
        statusLabel: "æœ‰äººå¯¾å¿œä¸­",
        statusNote: "é›£ã—ã„æ“ä½œèª¬æ˜ã®ãŸã‚ã€ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ãŒç”»é¢å…±æœ‰ã‚’ææ¡ˆäºˆå®šã€‚",
        streamTemplate: [
          { speaker: "customer", text: "ã•ãã»ã©ãƒ¡ãƒ¼ãƒ«ã§æ¡ˆå†…ãŒæ¥ãŸã€ãƒ¬ãƒãƒ¼ãƒˆç”»é¢ã€ã«è¡ŒããŸã„ã‚“ã§ã™ãŒã€ã©ã“ã‹ã‚‰é–‹ã‘ã°ã„ã„ã§ã™ã‹ï¼Ÿ" },
          { speaker: "ai", text: "æã‚Œå…¥ã‚Šã¾ã™ã€‚ã“ã¡ã‚‰ã®å†…å®¹ã¯ã€æ‹…å½“ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã«ãŠç¹‹ãã—ã¦è©³ã—ãã”æ¡ˆå†…ã—ã¾ã™ã­ã€‚" },
          { speaker: "ai", text: "ãŸã ã„ã¾æ‹…å½“è€…ã«ãŠç¹‹ãã—ã¦ã„ã¾ã™ã®ã§ã€ãã®ã¾ã¾ãŠå¾…ã¡ãã ã•ã„ã€‚" },
          { speaker: "human", text: "ãŠå¾…ãŸã›ã„ãŸã—ã¾ã—ãŸã€‚ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã®éˆ´æœ¨ã§ã™ã€‚ã„ã¾ã€PCã§ç®¡ç†ç”»é¢ã¯é–‹ã„ã¦ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã™ã‹ï¼Ÿ" },
          { speaker: "customer", text: "ã¯ã„ã€ãƒ›ãƒ¼ãƒ ç”»é¢ã¾ã§ã¯é–‹ã‘ã¾ã—ãŸã€‚" }
        ]
      },
      "call-ai-end-1": {
        summary:
          "å–¶æ¥­æ™‚é–“å¤–ã®å•ã„åˆã‚ã›ã€‚AIãŒè¦ä»¶ã‚’èãå–ã‚Šã€æŠ˜ã‚Šè¿”ã—å¸Œæœ›ã¨ã—ã¦å—ä»˜å®Œäº†æ¸ˆã¿ã€‚",
        statusLabel: "AIã§å®Œçµï¼ˆæŠ˜ã‚Šè¿”ã—å—ä»˜ï¼‰",
        statusNote: "æŠ˜ã‚Šè¿”ã—ãƒªã‚¹ãƒˆã«ç™»éŒ²æ¸ˆã¿ã€‚ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã®å¯¾å¿œã¯ä¸è¦ã€‚",
        streamTemplate: [
          { speaker: "customer", text: "ã™ã¿ã¾ã›ã‚“ã€è«‹æ±‚ã«é–¢ã—ã¦æŠ˜ã‚Šè¿”ã—ã‚’ãŠé¡˜ã„ã—ãŸã„ã‚“ã§ã™ãŒã€ä»Šã¯å–¶æ¥­æ™‚é–“å¤–ã§ã™ã‹ï¼Ÿ" },
          { speaker: "ai", text: "ã¯ã„ã€ç¾åœ¨ã¯å–¶æ¥­æ™‚é–“å¤–ã¨ãªã£ã¦ãŠã‚Šã¾ã™ãŒã€æŠ˜ã‚Šè¿”ã—ã®ãŠé›»è©±ã‚’æ‰¿ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚" },
          { speaker: "ai", text: "æŠ˜ã‚Šè¿”ã—ã‚’ã”å¸Œæœ›ã®æ—¥æ™‚ã¨ã€ç°¡å˜ãªã”ç”¨ä»¶ã‚’ãŠä¼ºã„ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ" },
          { speaker: "customer", text: "æ˜æ—¥ã®åˆå‰ä¸­ã§ã€æ–™é‡‘ã®å†…è¨³ã«ã¤ã„ã¦è©³ã—ãæ•™ãˆã¦ã»ã—ã„ã§ã™ã€‚" },
          { speaker: "ai", text: "æ‰¿çŸ¥ã—ã¾ã—ãŸã€‚æ˜æ—¥ã®åˆå‰ä¸­ã«ã€æ–™é‡‘ã®å†…è¨³ã«ã¤ã„ã¦æ‹…å½“è€…ã‚ˆã‚ŠæŠ˜ã‚Šè¿”ã—ã®ãŠé›»è©±ã‚’å·®ã—ä¸Šã’ã¾ã™ã€‚" }
        ]
      },
      "call-human-2": {
        summary:
          "è«‹æ±‚æ›¸ã®å®›åå¤‰æ›´ã«é–¢ã™ã‚‹ä¾é ¼ã€‚AIãŒè¦ä»¶ã‚’æ•´ç†ã—ã€è«‹æ±‚å°‚ä»»ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã¸è»¢é€æ¸ˆã¿ã€‚ç¾åœ¨ã¯æ‰‹ç¶šãæ–¹æ³•ã¨ç· ã‚æ—¥ã®æ¡ˆå†…ä¸­ã€‚",
        statusLabel: "æœ‰äººå¯¾å¿œä¸­ï¼ˆè«‹æ±‚çª“å£ï¼‰",
        statusNote: "åç¾©å¤‰æ›´ã®æ‰‹ç¶šãã«æœ¬äººç¢ºèªãŒå¿…è¦ãªãŸã‚ã€ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã§å¯¾å¿œä¸­ã€‚",
        streamTemplate: [
          { speaker: "customer", text: "è«‹æ±‚æ›¸ã®å®›åã‚’ä¼šç¤¾åã«å¤‰ãˆãŸã„ã‚“ã§ã™ã‘ã©ã€ã©ã†ã—ãŸã‚‰ã„ã„ã§ã™ã‹ï¼Ÿ" },
          { speaker: "ai", text: "æ‰¿çŸ¥ã—ã¾ã—ãŸã€‚è«‹æ±‚æ›¸ã®å®›åå¤‰æ›´ã§ã™ã­ã€‚ã“ã¡ã‚‰ã¯è«‹æ±‚å°‚ä»»ã®æ‹…å½“è€…ã«ãŠç¹‹ãã„ãŸã—ã¾ã™ã€‚" },
          { speaker: "human", text: "è«‹æ±‚çª“å£ã®ç”°ä¸­ã§ã™ã€‚ç¾åœ¨ã®å®›åã¨ã€å¤‰æ›´å¾Œã®ä¼šç¤¾åã‚’æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿ" },
          { speaker: "customer", text: "ä»Šã¯å€‹äººåã§ã€å¤‰æ›´å¾Œã¯ã€ã€‡ã€‡æ ªå¼ä¼šç¤¾ã€ã«ã—ãŸã„ã§ã™ã€‚" }
        ]
      }
    };

    // ===== ãƒ¢ãƒ¼ãƒ€ãƒ«åˆ¶å¾¡ =====
    const monitorModal = document.getElementById("monitor-modal");
    const monitorBackdrop = document.getElementById("monitor-backdrop");
    const monitorClose = document.getElementById("monitor-close");
    const monitorTitle = document.getElementById("monitor-title");
    const monitorMeta = document.getElementById("monitor-meta");
    const monitorSummaryText = document.getElementById("monitor-summary-text");
    const monitorStatusPill = document.getElementById("monitor-status-pill");
    const monitorStatusNote = document.getElementById("monitor-status-note");
    const monitorStreamLog = document.getElementById("monitor-stream-log");
    const monitorStopBtn = document.getElementById("monitor-stop-stream");
    const monitorResumeBtn = document.getElementById("monitor-resume-stream");

    let currentCallId = null;
    let streamIntervalId = null;
    let streamIndex = 0;
    let streamPaused = false;

    function appendTurn(turn) {
      const wrapper = document.createElement("div");
      wrapper.className = "turn";

      const label = document.createElement("div");
      label.className = "turn-label";
      label.textContent =
        turn.speaker === "customer"
          ? "ãŠå®¢æ§˜"
          : turn.speaker === "ai"
          ? "AIã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼"
          : "ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼";

      const content = document.createElement("div");
      content.className =
        "turn-content" +
        (turn.speaker === "ai" || turn.speaker === "human"
          ? " turn-content-ai"
          : "");

      content.textContent = turn.text;
      wrapper.appendChild(label);
      wrapper.appendChild(content);
      monitorStreamLog.appendChild(wrapper);

      // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ä¸€ç•ªä¸‹ã«
      monitorStreamLog.scrollTop = monitorStreamLog.scrollHeight;
    }

    function startStream(callId) {
      const details = callDetails[callId];
      if (!details) return;

      streamIndex = 0;
      streamPaused = false;
      monitorStreamLog.innerHTML = "";

      // æ—¢ã«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ãŒå‹•ã„ã¦ã„ãŸã‚‰ã‚¯ãƒªã‚¢
      if (streamIntervalId) {
        clearInterval(streamIntervalId);
        streamIntervalId = null;
      }

      // æœ€åˆã®2ã‚¿ãƒ¼ãƒ³ãã‚‰ã„ã¯å³è¡¨ç¤º
      const firstTurns = details.streamTemplate.slice(0, 2);
      firstTurns.forEach((t) => appendTurn(t));
      streamIndex = firstTurns.length;

      // ä»¥é™ã¯æ•°ç§’ã”ã¨ã«1ã‚¿ãƒ¼ãƒ³ãšã¤è¿½åŠ 
      streamIntervalId = setInterval(() => {
        if (streamPaused) return;

        if (streamIndex >= details.streamTemplate.length) {
          clearInterval(streamIntervalId);
          streamIntervalId = null;
          return;
        }
        appendTurn(details.streamTemplate[streamIndex]);
        streamIndex++;
      }, 3000);
    }

    function openMonitor(callId, meta) {
      currentCallId = callId;
      const details = callDetails[callId];

      monitorTitle.textContent = "é€šè©±ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°";
      monitorMeta.textContent = `ç™ºä¿¡è€…: ${meta.caller} / ã‚­ãƒ¥ãƒ¼: ${meta.queue} / çŠ¶æ…‹: ${meta.status}`;
      monitorSummaryText.textContent = details ? details.summary : "è¦ç´„æƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“ã€‚";
      monitorStatusPill.textContent = details ? details.statusLabel : "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä¸æ˜";
      monitorStatusNote.textContent = details ? details.statusNote : "ãƒ¡ãƒ¢æƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“ã€‚";

      monitorModal.classList.add("is-open");
      monitorBackdrop.classList.add("is-open");

      startStream(callId);
    }

    function closeMonitor() {
      monitorModal.classList.remove("is-open");
      monitorBackdrop.classList.remove("is-open");
      currentCallId = null;
      if (streamIntervalId) {
        clearInterval(streamIntervalId);
        streamIntervalId = null;
      }
    }

    monitorClose.addEventListener("click", closeMonitor);
    monitorBackdrop.addEventListener("click", closeMonitor);

    monitorStopBtn.addEventListener("click", () => {
      streamPaused = true;
    });

    monitorResumeBtn.addEventListener("click", () => {
      streamPaused = false;
    });

    // é€šè©±è¡Œã‚¯ãƒªãƒƒã‚¯ â†’ ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
    document.querySelectorAll(".call-row").forEach((row) => {
      row.addEventListener("click", () => {
        const callId = row.getAttribute("data-call-id");
        const meta = {
          caller: row.getAttribute("data-caller"),
          queue: row.getAttribute("data-queue"),
          status: row.getAttribute("data-status")
        };
        openMonitor(callId, meta);
      });
    });
  </script>
  <script src="global-search.js"></script>
</body>
</html>
